dotenv = require 'dotenv'
path = require 'path'

dataRoot = path.resolve 'data'

config =
  APP_DETAILS_DIR: path.join dataRoot, 'app-details'
  ROOT_DATA_DIR: dataRoot

# Required environment variables that will be exported from this module
ENVIRONMENT_VARIABLES = [
  'PORT'
  'STEAM_API_KEY'
]

# In dev mode, read from .env file
if process.env.NODE_ENV isnt 'production'
  do dotenv.config

getEnvironmentVariable = (name) =>
  process.env[name] or throw new Error \
    "Missing required environment variable #{name}"

ENVIRONMENT_VARIABLES.forEach (name) =>
  config[name] = getEnvironmentVariable name

module.exports = config
